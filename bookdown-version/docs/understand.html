<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Understandable | DASD Coding Standards</title>
  <meta name="description" content="These are the DASD coding standards." />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Understandable | DASD Coding Standards" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="These are the DASD coding standards." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Understandable | DASD Coding Standards" />
  
  <meta name="twitter:description" content="These are the DASD coding standards." />
  

<meta name="author" content="Data Science Hub" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="principles.html"/>
<link rel="next" href="accurate.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">DASD Coding Standards</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#motivation"><i class="fa fa-check"></i><b>0.1</b> Motivation</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#structure"><i class="fa fa-check"></i><b>0.2</b> Guidance structure</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#contributing"><i class="fa fa-check"></i><b>0.3</b> Contributing</a></li>
</ul></li>
<li class="part"><span><b>I Principles</b></span></li>
<li class="chapter" data-level="" data-path="principles.html"><a href="principles.html"><i class="fa fa-check"></i>Coding Principles</a></li>
<li class="chapter" data-level="1" data-path="understand.html"><a href="understand.html"><i class="fa fa-check"></i><b>1</b> Understandable</a><ul>
<li class="chapter" data-level="1.1" data-path="understand.html"><a href="understand.html#structure2"><i class="fa fa-check"></i><b>1.1</b> Code structure</a><ul>
<li class="chapter" data-level="" data-path="understand.html"><a href="understand.html#data"><i class="fa fa-check"></i>Data</a></li>
<li class="chapter" data-level="" data-path="understand.html"><a href="understand.html#readme"><i class="fa fa-check"></i>Documentation</a></li>
<li class="chapter" data-level="" data-path="understand.html"><a href="understand.html#functions"><i class="fa fa-check"></i>Abstractions</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="understand.html"><a href="understand.html#coding-style"><i class="fa fa-check"></i><b>1.2</b> Coding style</a><ul>
<li class="chapter" data-level="1.2.1" data-path="understand.html"><a href="understand.html#defaults"><i class="fa fa-check"></i><b>1.2.1</b> Defaults</a></li>
<li class="chapter" data-level="" data-path="understand.html"><a href="understand.html#style"><i class="fa fa-check"></i>Coding Style</a></li>
<li class="chapter" data-level="1.2.2" data-path="understand.html"><a href="understand.html#names"><i class="fa fa-check"></i><b>1.2.2</b> Naming conventions</a></li>
<li class="chapter" data-level="1.2.3" data-path="understand.html"><a href="understand.html#ccc"><i class="fa fa-check"></i><b>1.2.3</b> Clear and concise code</a></li>
<li class="chapter" data-level="1.2.4" data-path="understand.html"><a href="understand.html#linter"><i class="fa fa-check"></i><b>1.2.4</b> Apply a linter</a></li>
<li class="chapter" data-level="1.2.5" data-path="understand.html"><a href="understand.html#errors"><i class="fa fa-check"></i><b>1.2.5</b> Helpful error messages</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="accurate.html"><a href="accurate.html"><i class="fa fa-check"></i><b>2</b> Accurate</a><ul>
<li class="chapter" data-level="2.1" data-path="accurate.html"><a href="accurate.html#unittest"><i class="fa fa-check"></i><b>2.1</b> Unit testing</a><ul>
<li class="chapter" data-level="" data-path="accurate.html"><a href="accurate.html#testing-in-r"><i class="fa fa-check"></i>Testing in R</a></li>
<li class="chapter" data-level="" data-path="accurate.html"><a href="accurate.html#testing-in-python"><i class="fa fa-check"></i>Testing in Python</a></li>
<li class="chapter" data-level="" data-path="accurate.html"><a href="accurate.html#testing-in-javascript"><i class="fa fa-check"></i>Testing in Javascript</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="accurate.html"><a href="accurate.html#review"><i class="fa fa-check"></i><b>2.2</b> Project Review</a><ul>
<li class="chapter" data-level="" data-path="accurate.html"><a href="accurate.html#performing-good-peer-review"><i class="fa fa-check"></i>Performing good peer review</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="collaborate.html"><a href="collaborate.html"><i class="fa fa-check"></i><b>3</b> Collaborative</a><ul>
<li class="chapter" data-level="3.1" data-path="collaborate.html"><a href="collaborate.html#versioncontrol"><i class="fa fa-check"></i><b>3.1</b> Version Control</a><ul>
<li class="chapter" data-level="" data-path="collaborate.html"><a href="collaborate.html#github-flow-is-a-working-practice-that-helps-to"><i class="fa fa-check"></i>Github-Flow is a working practice that helps to:</a></li>
<li class="chapter" data-level="" data-path="collaborate.html"><a href="collaborate.html#there-are-6-steps-to-our-process"><i class="fa fa-check"></i>There are 6 steps to our process:</a></li>
<li class="chapter" data-level="" data-path="collaborate.html"><a href="collaborate.html#gitlink"><i class="fa fa-check"></i>Useful links for using github</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="reproduce.html"><a href="reproduce.html"><i class="fa fa-check"></i><b>4</b> Reproducible</a><ul>
<li class="chapter" data-level="4.1" data-path="reproduce.html"><a href="reproduce.html#projdep"><i class="fa fa-check"></i><b>4.1</b> Manage project dependencies</a><ul>
<li class="chapter" data-level="" data-path="reproduce.html"><a href="reproduce.html#dependency-management-tools"><i class="fa fa-check"></i>Dependency management tools</a></li>
<li class="chapter" data-level="" data-path="reproduce.html"><a href="reproduce.html#githash"><i class="fa fa-check"></i>Include a git hash</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="reproduce.html"><a href="reproduce.html#format"><i class="fa fa-check"></i><b>4.2</b> Format</a></li>
<li class="chapter" data-level="4.3" data-path="reproduce.html"><a href="reproduce.html#change"><i class="fa fa-check"></i><b>4.3</b> Optimize for change</a></li>
</ul></li>
<li class="part"><span><b>II Resources</b></span></li>
<li class="chapter" data-level="5" data-path="wf.html"><a href="wf.html"><i class="fa fa-check"></i><b>5</b> Workflow</a></li>
<li class="chapter" data-level="6" data-path="reviewer-notes.html"><a href="reviewer-notes.html"><i class="fa fa-check"></i><b>6</b> Reviewer notes</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DASD Coding Standards</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="understand" class="section level1">
<h1><span class="header-section-number">Chapter 1</span> Understandable</h1>
<p>It is crucial that we write code in a way that is understandable - through making sure that it is structured, commented and documented appropriately. This will mean that it can be understood easily by others and passed on to other staff with minimal additional instruction. This is clearly aids collboration and accuracy. [Amend]</p>
<div id="structure2" class="section level2">
<h2><span class="header-section-number">1.1</span> Code structure</h2>
<p>There should be clear logical separation of parameters, assumptions, data and code, with appropriate documentation.</p>
<div id="data" class="section level3 unnumbered">
<h3>Data</h3>
<ul>
<li><p>MOJ data should never be committed to the Github repository - even a ‘private’ repo isn’t secure. Instead, data should be stored in an s3 bucket or in Athena. [Link to ap guidance].</p></li>
<li><p>Small data files that are not MOJ data can be committed to the Github repo (e.g. parameters, csv containing assumptions, mock data for unit tests, lookup table) - these should be stored in a ‘data’ folder within the project folder.[Link to github with example project structure]</p></li>
<li><p>Prefer text format (e.g. csv) to Excel<br />
</p></li>
<li><p>It should be easy for others to change parameters and data without needed to understand the full codebase.</p></li>
</ul>
</div>
<div id="readme" class="section level3 unnumbered">
<h3>Documentation</h3>
<ul>
<li><p>Your project should include a README - by writing a README for your project you’re helping others (and your future self) to be able to understand and run your project. Find our template README <a href="https://github.com/moj-analytical-services/our-coding-standards/blob/master/README_template.md">here</a>.</p></li>
<li><p>You have added a description to your Github repository and tagged it with appropriate tags This will allow your project to be discoverable and reusable by others.</p></li>
<li><p>Any functions you create should have appropriate documentation</p></li>
<li><p>Your code should be appropriately commented</p></li>
<li><p>Try to make your commit messages as informative as possible</p></li>
</ul>
</div>
<div id="functions" class="section level3 unnumbered">
<h3>Abstractions</h3>
<p>Where appropriate, abstractions should be used if possible, e.g. functions, packages, modules etc. This makes code easier to understand, maintain and extend.</p>
<p>For R, you should use packages as fundamental units of code. For Python, you should factor code out into modules. In javascript, you should generally be using multiple <code>.js</code> files. For visualisation code, there should be a separation of concerns between the data model, and the code that visualises your data.</p>
<p>If you end up using a piece of code 3 times, it’s probably worth turning it into a function and separating it out into a separate script. For more information on how to write functions, see <a href="https://github.com/moj-analytical-services/writing_functions_in_r">here</a>. As a general rule, functions should be less than about 50 lines long.</p>
<p>All non trivial functions are documented using the programming language’s accepted standard.
This means that other users can understand your code more easily. If your functions are short and well documented, there is often little need for additional code comments.
For Python follow <a href="https://www.python.org/dev/peps/pep-0008/">PEP8</a> and particularly <a href="https://www.python.org/dev/peps/pep-0257/">PEP257</a>.
For R, use <code>roxygen2</code> to document your functions.</p>
</div>
</div>
<div id="coding-style" class="section level2">
<h2><span class="header-section-number">1.2</span> Coding style</h2>
<div id="defaults" class="section level3">
<h3><span class="header-section-number">1.2.1</span> Defaults</h3>
<p>There are often many ways of tackling a given problem. As a team, it makes sense to standardise our approach, not because one approach is necessarily better than all others, but because collaboration is easier if there is less diversity in our approaches. This section sets out sensible defaults which you are expected to follow. They are not strict rules, but you will be expected to explain the benefits of alternative approaches if you want to do something different.</p>
<table>
<colgroup>
<col width="28%" />
<col width="71%" />
</colgroup>
<thead>
<tr class="header">
<th>Language</th>
<th>Defaults</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>R</td>
<td>Follow <a href="http://adv-r.had.co.nz/Style.html">Hadley’s Style Guide</a>
* Default to packages from the <a href="http://tidyverse.org/">Tidyverse</a>, because they have been carefully designed to work together effectively as part of a modern data analysis workflow. More info can be found here: <a href="http://r4ds.had.co.nz">R for Data Science by Hadley Wickham</a>. For example:
* Prefer tibbles to data.frames
* Use ggplot2 rather than base graphics
* Use the pipe <code>%&gt;%</code> appropriately, but not always e.g. see <a href="https://twitter.com/hadleywickham/status/603883121197514752">here</a>.
* Prefer <code>purrr</code> to the <code>apply</code> family of functions. See <a href="http://r4ds.had.co.nz/iteration.html#the-map-functions">here</a>
* Use the package name when calling a function. For example, using dplyr::mutate() rather than just mutate()
* Use <a href="https://rstudio.github.io/packrat/">Packrat</a> for R dependencies - it’s required by the Analytical Platform if you need to deploy your work.
* R Packages are the <a href="http://r-pkgs.had.co.nz/">fundamental unit of reproducable R code.</a></td>
</tr>
<tr class="even">
<td>Python</td>
<td><ul>
<li>Follow [PEP8]</li>
<li>Use Python 3</li>
<li>Use pandas for data analysis</li>
<li>Use <code>loc</code> and <code>iloc</code> to write to data frames</li>
<li>Use Altair for basic data visualisation</li>
<li>Use Scikit Learn for machine learning</li>
<li>Use SQLAlchemy and pandas for database interactions, rather than writing your own SQL</li>
</ul></td>
</tr>
<tr class="odd">
<td>Encoding and CSVs</td>
<td>Use unicode. This means you should convert inputs that include non-ASCII characters to unicode as early as possible in your data processing workflow. If you are outputting to text files, these should be encoded in utf-8. Your output csvs should pass <a href="https://csvlint.io/">this</a> csv linter.</td>
</tr>
<tr class="even">
<td>SQL</td>
<td>Use Postgres or SQLite where possible, rather than other SQL database backends.</td>
</tr>
<tr class="odd">
<td>GIS</td>
<td><ul>
<li>Use PostGIS as your GIS backend</li>
<li>Prefer conducting your GIS analysis in code, e.g. using SQL, rather than point and click in a GUI</li>
<li>Use QGIS if you need a GUI.</li>
</ul></td>
</tr>
</tbody>
</table>
</div>
<div id="style" class="section level3 unnumbered">
<h3>Coding Style</h3>
<p>In addition to the above coding defaults, the following actions will help you to write understandable code.</p>
</div>
<div id="names" class="section level3">
<h3><span class="header-section-number">1.2.2</span> Naming conventions</h3>
<ul>
<li>Don’t be cute or jokey when naming things.</li>
<li>Names convey meaning - well-named functions &amp; variables can remove the need for a comment and make life a little easier for other readers, including your future self!</li>
<li>Avoid meaningless names like ‘obj’ / ‘result’ / ‘foo’.</li>
<li>Use single-letter variables only where the letter represents a well-known mathematical property (e.g. e = mc^2), or where their meaning is otherwise clear</li>
</ul>
</div>
<div id="ccc" class="section level3">
<h3><span class="header-section-number">1.2.3</span> Clear and concise code</h3>
<ul>
<li>Choose clarity over cleverness - use advanced language tricks with care.</li>
<li>Code should be <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a> - which stands for ‘Don’t Repeat Yourself’. - The <a href="https://en.wikipedia.org/wiki/Rule_of_three_(computer_programming)">‘Rule of Three’</a> is a good approach to managing duplication. Less code is usually better - but not at the expense of clarity.<br />
</li>
<li>Ensure that your tests and linters run automatically on all pull requests, if that is possible, by …</li>
<li>Use code comments judiciously:</li>
</ul>
<blockquote>
<p>Good code is its own best documentation. As you’re about to add a comment, ask yourself, “How can I improve the code so that this comment isn’t needed?” Improve the code and then document it to make it even clearer.” - Steve McConnell</p>
</blockquote>
<p>Comments are for explaining why something is needed, not how it works. Appropriate use of comments means it is easier to understand how code works at a later date. Before commenting, consider whether the comment fits better into the function’s documentation than in a comment.</p>
</div>
<div id="linter" class="section level3">
<h3><span class="header-section-number">1.2.4</span> Apply a linter</h3>
<p>Apply a linter to easily review your code formatting. This means our coding style will be consistent across projects. It will also make it easier for others to understand our code.</p>
<p>In RStudio, the keyboard shortcut ‘ctrl+shift+A’ will reformat your code and automate some of the process of passing the linter. If you apply the linter as you work, rather than at the end, you will find it much easier to write code that passes the linter first time.</p>
<ul>
<li>For R use <a href="https://cran.r-project.org/web/packages/lintr/readme/README.html">Lintr</a> and follow <a href="http://adv-r.had.co.nz/Style.html">Hadley’s Style Guide</a><br />
</li>
<li>For Python, use [pylint] and follow [PEP8]</li>
</ul>
</div>
<div id="errors" class="section level3">
<h3><span class="header-section-number">1.2.5</span> Helpful error messages</h3>
<p>Accept this and code defensively when calling other services.
Every HTTP call could error or hang - handle failures appropriately and fail fast. Don’t let long-running external calls impact your user experience.
Aim to provide useful information to end users and people working on the code, when something fails.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="principles.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="accurate.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-version.pdf", "bookdown-version.epub"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
